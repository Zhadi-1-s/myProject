<div class="login-page d-flex vh-100">
  <div class="logo">
    <h2 class="brand-name">TechLombard</h2>
  </div>

  <!-- Левая часть -->
  <div class="login-left d-flex flex-column justify-content-center p-5 ml-3">
    <div class="login-box mx-auto" style="max-width: 360px; width: 100%;">
      <!-- Заголовок -->
      <h3 class="fw-bold mb-2">{{'Sign Up' | translate }}</h3>
      <p class="text-muted mb-4">{{'Please enter your details to create an account'|translate}}</p>

      <!-- Google login -->
      <button type="button"
              class="btn btn-light border w-100 d-flex align-items-center justify-content-center mb-3"
              (click)="loginWithGoogle()">
        <img src="https://www.svgrepo.com/show/355037/google.svg"
             alt="Google"
             width="20"
             class="me-2" />
        {{'Sign up with Google' | translate}}
      </button>

      <!-- Разделитель -->
      <div class="d-flex align-items-center my-3">
        <hr class="flex-grow-1" />
        <span class="px-2 text-muted">{{'or'|translate}}</span>
        <hr class="flex-grow-1" />
      </div>

      <!-- Register form -->
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <!-- Name -->
        <div class="mb-3">
          <label for="name" class="form-label">{{'Full name' | translate}}</label>
          <input type="text"
                 id="name"
                 formControlName="name"
                 class="form-control"
                 placeholder="Enter your name" />
          <div *ngIf="submitted && registerForm.controls['name'].errors" class="text-danger small">
            <div *ngIf="registerForm.controls['name'].errors['required']">{{'Name is required' | translate}}</div>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label">{{'Email address' | translate}}</label>
          <input type="email"
                 id="email"
                 formControlName="email"
                 class="form-control"
                 placeholder="Enter your email" />
          <div *ngIf="submitted && registerForm.controls['email'].errors" class="text-danger small">
            <div *ngIf="registerForm.controls['email'].errors['required']">E{{'mail is required' | translate}}</div>
            <div *ngIf="registerForm.controls['email'].errors['email']">{{'Invalid email' | translate}}</div>
          </div>
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label for="password" class="form-label">{{'Password' | translate}}</label>
          <input type="password"
                 id="password"
                 formControlName="password"
                 class="form-control"
                 placeholder="Enter your password" />
          <div *ngIf="submitted && registerForm.controls['password'].errors" class="text-danger small">
            <div *ngIf="registerForm.controls['password'].errors['required']">{{'Password is required' | translate}}</div>
            <div *ngIf="registerForm.controls['password'].errors['minlength']">{{'Password must be at least 6 characters' | translate}}</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="role" class="form-label">{{ 'Account type' | translate }}</label>
          <select id="role"
                  formControlName="role"
                  class="form-select">
            <option value="user">{{ 'Regular user' | translate }}</option>
            <option value="pawnshop">{{ 'Pawnshop' | translate }}</option>
          </select>

          <div *ngIf="submitted && registerForm.controls['role'].errors" class="text-danger small">
            <div *ngIf="registerForm.controls['role'].errors['required']">{{ 'Role is required' | translate }}</div>
          </div>
        </div>

        <!-- Upload avatar -->
        <div class="mb-3">
          <label for="avatar" class="form-label">{{ 'Upload avatar' | translate }}</label>

          <div class="d-flex flex-column align-items-center">
            <!-- Превью аватара -->
            <div *ngIf="avatarPreview" class="mb-2">
              <img [src]="avatarPreview" alt="Avatar preview" class="rounded-circle" width="80" height="80" />
            </div>

            <!-- Поле выбора файла -->
            <input
              type="file"
              id="avatar"
              class="form-control"
              accept="image/*"
              (change)="onAvatarSelected($event)"
            />
          </div>

          <div *ngIf="avatarError" class="text-danger small mt-1">
            {{ avatarError }}
          </div>
        </div>


        <!-- Submit -->
        <button type="submit" class="btn btn-dark w-100 mb-3">{{'Sign Up' | translate}}</button>
      </form>

      <!-- Link to login -->
      <p class="text-center text-muted">
        {{'Already have an account?'|translate}}
        <a class="text-decoration-none" (click)="signIn()">{{'Sign in'|translate}}</a>
      </p>
    </div>
  </div>

  <!-- Правая часть (картинка) -->
  <div class="login-right flex-grow-1 d-flex align-items-center justify-content-center">
    <img src="assets/png/sign-in.jpg" class="login-image mr-3" alt="Register illustration" />
  </div>
</div>
