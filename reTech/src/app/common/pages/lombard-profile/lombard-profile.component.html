<div class="container-fluid mt-3">
  <div class="row justify-content-center">
    <!-- Top Section -->
    <div class="col-12">
      <div class="profile-header d-flex align-items-center p-3 mb-3" *ngIf="profile; else notLoggedIn">
        <!-- Pawnshop Logo -->
        <div class="avatar-img">
          <img [src]="profile?.logoUrl || 'assets/png/default-pawnshop.jpg'"
               alt="pawnshop-logo"
               class="rounded-circle me-3"
               width="190"
               height="190" />
        </div>

        <!-- Pawnshop Info -->
        <div class="flex-grow-1 ms-5">
          <h3 class="mb-1">{{ profile?.name || 'Pawnshop name' }}</h3>
          <!-- <p class="text-muted mb-2">{{ profile?.description || 'Pawnshop description' }}</p> -->
          <div class="d-flex gap-3 mt-3">
            <p class="text-muted mb-1 small fw-semibold">
              <i class="fa-regular fa-clock me-1"></i>
              {{ profile?.openTime }} – {{ profile?.closeTime }}
              <span
                [ngClass]="{
                  'text-success': isOpenNow,
                  'text-danger': !isOpenNow
                }"
                class="ms-2 fw-bold"
              >
                {{ isOpenNow ? 'Открыто' : 'Закрыто' }}
              </span>
            </p>
            <p class="text-muted mb-1 small fw-semibold">
              <i class="fa-regular fa-clock me-1"></i> {{ currentTime | date:'shortTime' }}
            </p>
            <!-- <p class="text-muted mb-0 small fw-semibold">
              <i class="fa-regular fa-envelope"></i> {{ profile?.email }}
            </p> -->
          </div>
        </div>

        <!-- Buttons -->
        <div class="d-flex gap-2 align-self-end">
          <button class="btn btn-lombard-edit" (click)="openEditLombard()">
            <i class="fa-solid fa-building me-2"></i>{{ 'Edit details of shop' | translate }}
          </button>
          <button class="btn btn-outline-primary btn-sm" (click)="openEditModal()">
            <i class="fa-regular fa-pen-to-square me-1"></i> {{ 'Edit profile' | translate }}
          </button>
          <button class="btn btn-success btn-sm" (click)="openAddOfferModal()">
            <i class="fa-solid fa-plus me-1"></i> {{ 'Add offer' | translate }}
          </button>
        </div>
      </div>

      <ng-template #notLoggedIn>
        <div class="alert alert-warning d-flex align-items-center p-4 mb-3" role="alert">
          <i class="fa-solid fa-profile-lock me-3 fs-4"></i>
          <div>
            <h5 class="mb-1 fw-bold">{{ 'You are not logged in' | translate }}</h5>
            <p class="mb-0">
              {{ 'Please' | translate }}
              <a routerLink="/login" class="text-primary fw-semibold">{{ 'log in' | translate }}</a>
              {{ 'or' | translate }}
              <a routerLink="/register" class="text-primary fw-semibold">{{ 'register' | translate }}</a>.
            </p>
          </div>
        </div>
      </ng-template>
    </div>

    <!-- Bottom Section -->
    <div class="col-12">
      <div class="profile-section d-flex gap-3">
  
        <div class="description-content p-4 shadow-sm rounded-3 bg-light">

          <button class="edit-icon " title="Edit description">
            <i class="far fa-edit"></i>
          </button>

          <div class="d-flex align-items-center mb-3">
            <i class="fa-solid fa-circle-info text-primary me-2 fs-5"></i>
            <h4 class="m-0 fw-semibold">{{ "Description" | translate }}</h4>
          </div>

          <div class="description-text">
            <span *ngIf="profile.description; else noDescription">
              {{ profile.description }}
            </span>
            <ng-template #noDescription>
              <span class="text-muted fst-italic">
                {{ "No description provided yet." | translate }}
              </span>
            </ng-template>
          </div>
        </div>

     
        <div class="items-content p-4 shadow-sm  bg-white">
          <div class="d-flex align-items-center mb-3">
            <i class="fa-solid fa-box text-success me-2 fs-5"></i>
            <h4 class="m-0 fw-semibold">{{ "Available items" | translate }}</h4>
          </div>

          <div *ngIf="items && items.length > 0; else noOffers" class="row g-3">
            <div class="col-md-6" *ngFor="let item of items">
              <div class="card h-100 shadow-sm border-0">
                <img
                  *ngIf="item.photos && item.photos.length"
                  [src]="item.photos[0]"
                  class="card-img-top rounded-top"
                  alt="{{ item.title }}"
                />
                <div class="card-body p-3">
                  <h5 class="card-title mb-1">{{ item.title }}</h5>
                  <p class="card-text text-muted small mb-2">{{ item.category }}</p>
                  <span
                    class="badge"
                    [ngClass]="{
                      'bg-success': item.status === 'open',
                      'bg-secondary': item.status === 'closed',
                      'bg-danger': item.status === 'sold'
                    }"
                  >
                    {{ item.status | titlecase }}
                  </span>
                </div>
              </div>
            </div>
          </div>

          <ng-template #noOffers>
            <p class="text-muted fst-italic m-0">
              {{ "You have not added any gadgets" | translate }}
            </p>
          </ng-template>
        </div>

        <!-- Правая колонка -->
        <div class="extra-content">
          <div class="small-block text-center">
            <i class="fa-solid fa-star text-warning fs-4 mb-2"></i>
            <h6 class="fw-semibold mb-1">{{ 'Rating and reviews' | translate }}</h6>
            <p class="text-muted small mb-0">{{ 'No reviews yet' | translate }}</p>
          </div>

          <div class="small-block text-center">
            <i class="fa-solid fa-chart-line text-success fs-4 mb-2"></i>
            <h6 class="fw-semibold mb-1">{{ 'Statistics' | translate }}</h6>
            <p class="text-muted small mb-0">{{ 'Active deals: 0' | translate }}</p>
          </div>
        </div>



      </div>
    </div>
  </div>
</div>
